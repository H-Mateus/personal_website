---
title: Testing Out Blogdown
author: Gabriel Mateus Bernardo Harrington
date: '2020-06-05'
slug: testing-out-blogdown
categories: []
tags:
  - Demo
  - R Markdown
subtitle: 'Getting a bit of practice with the blogdown workflow'
summary: ''
authors: []
lastmod: '2020-06-05T12:07:18+01:00'
featured: no
image:
  caption: 'Image credit: [**Medium**](https://medium.com/@eraylson_/the-hello-world-in-data-science-and-machine-learning-32b85946eb67)'
  focal_point: ''
  preview_only: no
projects: []
---



<div id="hello-world" class="section level1">
<h1>Hello world!</h1>
<p>This is my very first blog post using an R Markdown file within blogdown.</p>
<p>The three prior blog posts on this site came with the template, but I’m leaving them there for now as they are great introductory resources for using <a href="https://sourcethemes.com/academic/">Academic</a>.</p>
<p>This post (and this whole site!) wouldn’t be possible without the excellent teaching material from <a href="https://alison.rbind.io/">Dr. Alison Hill</a>, and the lovely people who made R and her many brilliant packages for which I offer all the gratitude I can muster!</p>
<p>For practice, I’m going to demonstrate how we can include the following in a single post:</p>
<ol style="list-style-type: decimal">
<li>R code</li>
<li>A plot</li>
<li>An image (via markdown syntax)</li>
<li>An image (via <code>knitr::include_graphics</code>)</li>
<li>A relative link to another section in my site</li>
<li>Reading in data</li>
</ol>
</div>
<div id="iris-data-set" class="section level1">
<h1>1) Iris data set</h1>
<p>Let’s make a plot using the <code>iris</code> data set in <code>ggplot2</code>.</p>
<pre class="r"><code>library(ggplot2)
# Dataset
head(iris)</code></pre>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p><br></p>
</div>
<div id="plotting" class="section level1">
<h1>2) Plotting</h1>
<pre class="r"><code>scatter &lt;- ggplot(data=iris, aes(x= Sepal.Length, y = Sepal.Width))
scatter + geom_point(aes(color=Species, shape=Species)) +
  xlab(&quot;Sepal Length&quot;) + ylab(&quot;Sepal Width&quot;) +
  theme_bw()</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="embedding-a-bundled-image" class="section level1">
<h1>3) Embedding a bundled image</h1>
<p>Using markdown syntax <code>![Cute red panda](cute-red-panda-40.jpg)</code> to generate the image below:</p>
<center>
<div class="figure">
<img src="cute-red-panda-40.jpg" width="500" alt="" />
<p class="caption">Cute red panda</p>
</div>
</center>
<p><br></p>
</div>
<div id="using-knitr" class="section level1">
<h1>4) Using knitr</h1>
<p>We can also accomplish this with a code chunk, setting the following parameter <code>out.width="500px", fig.align='center'</code></p>

<pre class="r"><code>knitr::include_graphics(&quot;cute-red-panda-40.jpg&quot;)</code></pre>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-3"></span>
<img src="cute-red-panda-40.jpg" alt="We can do nice auto-numbered captions as well! Image credit: Unsplash" width="500px" />
<p class="caption">
Figure 1: We can do nice auto-numbered captions as well! Image credit: <a href="https://unsplash.com/photos/QZwf5yNopUo"><strong>Unsplash</strong></a>
</p>
</div>
<p><br></p>
</div>
<div id="relative-links" class="section level1">
<h1>5) Relative links</h1>
<p>I can also include some relative links to, for example, tell you to check out this <a href="../../../../home/../">other section of my site</a>!</p>
<p>The structure of relative links is a bit confusing.
When specifying the location of the page you want to get to, the reference point is the directory that your post lives in (and NOT the project root directory).</p>
<p><br></p>
</div>
<div id="reading-in-data" class="section level1">
<h1>6) Reading in data</h1>
<p>Let’s flex our R muscles a little more by reading in some topical data, and making a fancier plot.</p>
<p>The data is total non-COVID-19 excess deaths per 100,000 and deaths involving COVID-19 per 100,000 for each 10-year age group from England and Wales, Week 11 to Week 18.
The numbers around COVID-19 as in constant flux, so please be aware of the date.
This data was downloaded from the Office of National Statistics on 2020-06-05.</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
<pre><code>## ✔ tibble  3.1.7     ✔ dplyr   1.0.9
## ✔ tidyr   1.2.0     ✔ stringr 1.4.0
## ✔ readr   2.1.2     ✔ forcats 0.5.1
## ✔ purrr   0.3.4</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>covid_deaths &lt;- read_csv(&quot;covid_deaths_by_age_2020-06-05.csv&quot;)</code></pre>
<pre><code>## New names:
## • `` -&gt; `...2`
## • `` -&gt; `...3`</code></pre>
<pre><code>## Rows: 16 Columns: 3
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (3): The rate of non-COVID-19 deaths per 100,000 is highest in the 90 ye...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre class="r"><code># let&#39;s select the rows of actual data
covid_deaths_filtered &lt;- covid_deaths[7:16,]
# set column names
names(covid_deaths_filtered) &lt;- c(&quot;age_group&quot;,
                                  &quot;non-covid_excess_mortality&quot;,
                                  &quot;covid_excess_mortality&quot;)
# convert to long-format dataframe
covid_deaths_long &lt;- pivot_longer(covid_deaths_filtered,
                                  -age_group,
                                  names_to = &quot;mortality_type&quot;,
                                  values_to = &quot;deaths&quot;)
# convert deaths to a numeric
covid_deaths_long$deaths &lt;- as.numeric(covid_deaths_long$deaths)
# plot
ggplot(covid_deaths_long, aes(x = age_group, y = deaths)) +
  geom_bar(aes(fill = mortality_type),
           stat=&quot;identity&quot;,
           position=position_dodge()) +
  ylab(&quot;Deaths registered per 100,000&quot;) +
  xlab(&quot;Age Group&quot;) +
  theme_bw() +
  theme(legend.position = &quot;top&quot;,
        legend.direction = &quot;horizontal&quot;) +
  scale_fill_manual(name = &quot;&quot;,
                    labels = c(&quot;COVID-19 mortality rate&quot;,
                               &quot;Non-COVID-19 excess mortality rate&quot;),
                    values = c(&quot;tomato&quot;, &quot;steelblue&quot;)) +
  labs(caption = &quot;Source: Office for National Statistics, 2020-06-05&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>If you’re curious about explanations surrounding the increase in non-COVID-19 related deaths <a href="https://www.ons.gov.uk/peoplepopulationandcommunity/birthsdeathsandmarriages/deaths/articles/analysisofdeathregistrationsnotinvolvingcoronaviruscovid19englandandwales28december2019to1may2020/technicalannex">this article</a> lists some theories.</p>
<p>Interestingly, in the age groups up to 50 the non-COVID-19 death rate has declined slightly</p>
<pre class="r"><code>print(covid_deaths_filtered)</code></pre>
<pre><code>## # A tibble: 10 × 3
##    age_group   `non-covid_excess_mortality` covid_excess_mortality
##    &lt;chr&gt;       &lt;chr&gt;                        &lt;chr&gt;                 
##  1 0 to 9      -0.792423313                 0.014000412           
##  2 10 to 19    -1.056672991                 0.130274752           
##  3 20 to 29    -2.228613119                 0.653169144           
##  4 30 to 39    -1.362056932                 1.944003908           
##  5 40 to 49    -2.631069137                 6.697752064           
##  6 50 to 59    4.289242454                  20.72845098           
##  7 60 to 69    2.420093746                  55.40162727           
##  8 70 to 79    46.66123612                  152.8772002           
##  9 80 to 89    165.364023                   516.5874406           
## 10 90 and over 752.7944396                  1190.274376</code></pre>
<p>And for a little context for these numbers, the <a href="https://www.rospa.com/leisure-safety/advice/lightning/">Royal Society for the Prevention of Accidents</a> reports that 30-60 people are stuck by lightning each year.</p>
<p>The <a href="https://www.ons.gov.uk/peoplepopulationandcommunity/populationandmigration/populationestimates/bulletins/annualmidyearpopulationestimates/mid2019">Office for National Statistics</a> estimated the population in the UK to be 66,796,807 in mid-2019.
So if we take then high end of 60 lightning strikes, the odds of getting stuck by lightning in the UK is:</p>
<pre class="r"><code># stop scientific notation
options(scipen=999)
# calculate risk per 100,000
risk = (60 / 66796807) * 100000
# print result
print(paste(&quot;The incidence rate of lightning strikes per 100,000 = &quot;, round(risk, 5), sep = &quot;&quot;))</code></pre>
<pre><code>## [1] &quot;The incidence rate of lightning strikes per 100,000 = 0.08982&quot;</code></pre>
<p>So if we assume all humans are equally likely to get stuck by lightning in a given year, then it’s several times more likely for a 0-9 year old to get stuck by lightning than die with COVID-19.</p>
<p>I should stress that this isn’t to make light of COVID-19, many people are dying, and no effort should be spared wherever this can be prevented.
If anything, this should highlight how damaging COVID-19 is with a relatively low fatality rate.
This pandemic could easily be even worse than it already is with more lethal pathogen behind it, and it is perfectly within the realm of possibility that the next pandemic, which is sadly inevitable, will star a deadlier disease.
My greatest hope is that we can use this event as a wakeup call to stop ignoring the scientists who have warned this would happen repeatedly, and prepare better to mitigate future pandemics.</p>
</div>
